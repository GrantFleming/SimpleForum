function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{5920:function(t,e,n){"use strict";n.r(e),n.d(e,"ForumModule",(function(){return T}));var o=n("ofXK"),r=n("3Pt+"),i=n("Wp6s"),s=n("fXoL"),c=n("FKr1");n("8LU1"),n("cH1L");var a,u,l=((a=function t(){_classCallCheck(this,t)}).\u0275mod=s.Kb({type:a}),a.\u0275inj=s.Jb({factory:function(t){return new(t||a)},imports:[[c.e,c.c],c.e,c.c]}),a),b=n("qFsG"),f=n("bTqV"),p=n("bOdf"),d=n("tyNb"),m=n("QQ3A"),g=n("6oFh"),h=n("hCCi"),y=function t(){_classCallCheck(this,t),this.title="",this.body=""},v=((u=function(){function t(){_classCallCheck(this,t),this.post=new y}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||u)},u.\u0275cmp=s.Gb({type:u,selectors:[["app-post"]],inputs:{post:"post"},decls:9,vars:3,consts:[[1,"title"],[1,"creator"],[1,"body"]],template:function(t,e){1&t&&(s.Rb(0,"mat-card"),s.Rb(1,"mat-card-header"),s.Rb(2,"mat-card-title",0),s.tc(3),s.Qb(),s.Rb(4,"mat-card-subtitle",1),s.tc(5),s.Qb(),s.Qb(),s.Rb(6,"mat-card-content"),s.Rb(7,"p",2),s.tc(8),s.Qb(),s.Qb(),s.Qb()),2&t&&(s.Bb(3),s.uc(e.post.title),s.Bb(2),s.vc("by: ",e.post.creator,""),s.Bb(3),s.uc(e.post.body))},directives:[i.a,i.c,i.f,i.e,i.b],styles:["mat-card[_ngcontent-%COMP%]{text-align:left}"]}),u),P=["forumId",""];function C(t,e){if(1&t&&s.Nb(0,"app-post",4),2&t){var n=e.$implicit;s.Db("last",e.last),s.gc("post",n)}}function k(t,e){if(1&t&&(s.Pb(0),s.rc(1,C,1,3,"app-post",3),s.Ob()),2&t){var n=s.dc();s.Bb(1),s.gc("ngForOf",n.posts)}}function w(t,e){1&t&&(s.Rb(0,"div",5),s.Rb(1,"p"),s.tc(2,"There are no posts in this forum yet."),s.Qb(),s.Rb(3,"p"),s.tc(4,"You should add one!"),s.Qb(),s.Qb())}var _,I,O=((_=function(){function t(e){_classCallCheck(this,t),this.postService=e,this.newPost=!1}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(t){this._checkAttributes(),clearTimeout(this.nextUpdate),this._getPosts()}},{key:"addPost",value:function(t){this.posts.push(t),this.newPost=!0}},{key:"_checkAttributes",value:function(){if(null==this.forumId)throw new Error("Attribute 'forumId' cannot be undefined or null.")}},{key:"ngOnDestroy",value:function(){clearTimeout(this.nextUpdate)}},{key:"ngAfterViewChecked",value:function(){if(this.newPost){var t=document.querySelector("app-post.last");scrollBy(0,t.scrollHeight+t.children.item(0).clientHeight),this.newPost=!1}}},{key:"_getPosts",value:function(){var t=this;this.postService.getPosts(this.forumId).subscribe({next:function(e){t.posts=e},complete:function(){t.nextUpdate=setTimeout((function(){return t._getPosts()}),5e3)}})}}]),t}()).\u0275fac=function(t){return new(t||_)(s.Mb(h.a))},_.\u0275cmp=s.Gb({type:_,selectors:[["app-post-feed","forumId",""]],inputs:{forumId:"forumId"},features:[s.zb],attrs:P,decls:4,vars:2,consts:[[1,"container"],[4,"ngIf","ngIfElse"],["noPostsNotification",""],[3,"last","post",4,"ngFor","ngForOf"],[3,"post"],[1,"noPostNotification"]],template:function(t,e){if(1&t&&(s.Rb(0,"div",0),s.rc(1,k,2,1,"ng-container",1),s.rc(2,w,5,0,"ng-template",null,2,s.sc),s.Qb()),2&t){var n=s.kc(3);s.Bb(1),s.gc("ngIf",!e.posts||e.posts.length>0)("ngIfElse",n)}},directives:[o.i,o.h,v],styles:["app-post[_ngcontent-%COMP%]{padding:1em}.container[_ngcontent-%COMP%]{text-align:center}.noPostNotification[_ngcontent-%COMP%]{display:inline-block;margin:2em;padding:2em;text-align:center;background:#222;border-radius:5px}.noPostNotification[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}"]}),_),Q=n("kmnG"),R=["forumId",""],x=((I=function(){function t(e,n){_classCallCheck(this,t),this.fb=e,this.postService=n,this.newPostEvent=new s.n,this.newPostForm=this.fb.group({title:["",[r.j.required,r.j.maxLength(128)]],body:["",[r.j.required]]})}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"onSubmit",value:function(t){var e=this,n=Object.assign({forumId:this.forumId},t);this.postService.addPost(n).subscribe((function(t){return e.newPostEvent.emit(t)}))}},{key:"title",get:function(){return this.newPostForm.get("title")}},{key:"titleErrors",get:function(){return this.title.errors?Object.keys(this.title.errors):[]}},{key:"body",get:function(){return this.newPostForm.get("body")}},{key:"bodyErrors",get:function(){return this.body.errors?Object.keys(this.body.errors):[]}}]),t}()).\u0275fac=function(t){return new(t||I)(s.Mb(r.b),s.Mb(h.a))},I.\u0275cmp=s.Gb({type:I,selectors:[["app-add-post","forumId",""]],inputs:{forumId:"forumId"},outputs:{newPostEvent:"newPostEvent"},attrs:R,decls:16,vars:4,consts:[[3,"formGroup","ngSubmit"],["ngForm","ngForm"],["formControlName","title","id","title","matInput","","type","text"],["formControlName","body","id","body","matInput","","type","text"],["color","primary","mat-raised-button","","type","submit",1,"button",3,"disabled"]],template:function(t,e){if(1&t){var n=s.Sb();s.Rb(0,"form",0,1),s.Zb("ngSubmit",(function(){s.lc(n);var t=s.kc(1);return e.onSubmit(e.newPostForm.value),t.resetForm()})),s.Rb(2,"mat-form-field"),s.Rb(3,"mat-label"),s.tc(4,"Title"),s.Qb(),s.Nb(5,"input",2),s.Rb(6,"mat-error"),s.tc(7),s.Qb(),s.Qb(),s.Rb(8,"mat-form-field"),s.Rb(9,"mat-label"),s.tc(10,"Body"),s.Qb(),s.Nb(11,"textarea",3),s.Rb(12,"mat-error"),s.tc(13),s.Qb(),s.Qb(),s.Rb(14,"button",4),s.tc(15,"Post"),s.Qb(),s.Qb()}2&t&&(s.gc("formGroup",e.newPostForm),s.Bb(7),s.uc(e.titleErrors),s.Bb(6),s.uc(e.bodyErrors),s.Bb(1),s.gc("disabled",e.newPostForm.invalid))},directives:[r.k,r.g,r.d,Q.b,Q.e,r.a,b.a,r.f,r.c,Q.a,f.a],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}textarea[_ngcontent-%COMP%]{min-height:100px;max-height:300px;height:100%}"]}),I);function M(t,e){if(1&t){var n=s.Sb();s.Rb(0,"app-add-post",11),s.Zb("newPostEvent",(function(t){return s.lc(n),s.dc(),s.kc(6).addPost(t)})),s.Qb()}if(2&t){var o=s.dc(2);s.gc("forumId",o.forum.id)}}var E=function(){return{return_to_previous:!0}};function F(t,e){1&t&&(s.Rb(0,"button",12),s.tc(1,"Log in to add your own posts! "),s.Qb()),2&t&&s.gc("queryParams",s.hc(1,E))}function B(t,e){if(1&t&&(s.Rb(0,"div",4),s.Rb(1,"h2",5),s.tc(2),s.Qb(),s.Rb(3,"p",6),s.tc(4),s.Qb(),s.Nb(5,"app-post-feed",7,8),s.rc(7,M,1,1,"app-add-post",9),s.rc(8,F,2,2,"ng-template",null,10,s.sc),s.Qb()),2&t){var n=s.kc(9),o=s.dc();s.Bb(2),s.uc(o.forum.name),s.Bb(2),s.uc(o.forum.description),s.Bb(1),s.gc("forumId",o.forum.id),s.Bb(2),s.gc("ngIf",o.authService.isLoggedIn())("ngIfElse",n)}}function S(t,e){1&t&&(s.Rb(0,"div",13),s.tc(1," We are loading your content "),s.Qb())}var j,N,G,L=[{path:"",component:(j=function(){function t(e,n,o,r){_classCallCheck(this,t),this.route=e,this.forumService=n,this.router=o,this.authService=r}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.paramMap.pipe(Object(p.a)((function(e){return t.forumService.getForum(+e.get("id"))}))).subscribe((function(e){return t.forum=e}),(function(){return t.router.navigateByUrl("/page-not-found",{replaceUrl:!0})}))}}]),t}(),j.\u0275fac=function(t){return new(t||j)(s.Mb(d.a),s.Mb(m.a),s.Mb(d.b),s.Mb(g.b))},j.\u0275cmp=s.Gb({type:j,selectors:[["app-forum"]],decls:6,vars:2,consts:[[1,"control-bar"],["color","primary","mat-raised-button","","routerLink","/forums",1,"forum-explorer-button"],["class","container",4,"ngIf","ngIfElse"],["loading",""],[1,"container"],[1,"forum-name"],[1,"forum-desc"],[3,"forumId"],["feedComponent",""],[3,"forumId","newPostEvent",4,"ngIf","ngIfElse"],["login_prompt",""],[3,"forumId","newPostEvent"],["color","primary","mat-raised-button","","routerLink","/user/login",1,"login_prompt",3,"queryParams"],[1,"container","loading-widget"]],template:function(t,e){if(1&t&&(s.Rb(0,"div",0),s.Rb(1,"button",1),s.tc(2,"Forum Explorer "),s.Qb(),s.Qb(),s.rc(3,B,10,5,"div",2),s.rc(4,S,2,0,"ng-template",null,3,s.sc)),2&t){var n=s.kc(5);s.Bb(3),s.gc("ngIf",e.forum)("ngIfElse",n)}},directives:[f.a,d.c,o.i,O,x],styles:["*[_ngcontent-%COMP%]{max-width:1024px;display:block;margin:auto}.control-bar[_ngcontent-%COMP%]{padding:0 2em;height:2em}.control-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 0 0 1em;float:right}.container[_ngcontent-%COMP%]{padding:2em;text-align:center}app-post-feed[_ngcontent-%COMP%]{text-align:left}app-add-post[_ngcontent-%COMP%]{max-width:700px;width:100%;display:inline-block}"]}),j)}],q=((G=function t(){_classCallCheck(this,t)}).\u0275mod=s.Kb({type:G}),G.\u0275inj=s.Jb({factory:function(t){return new(t||G)},imports:[[d.e.forChild(L)],d.e]}),G),T=((N=function t(){_classCallCheck(this,t)}).\u0275mod=s.Kb({type:N}),N.\u0275inj=s.Jb({factory:function(t){return new(t||N)},imports:[[o.b,r.i,i.d,l,b.b,f.b,q]]}),N)}}]);