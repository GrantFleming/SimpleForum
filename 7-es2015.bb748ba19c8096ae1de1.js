(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{5920:function(t,e,n){"use strict";n.r(e);var o=n("ofXK"),r=n("3Pt+"),s=n("Wp6s"),i=n("fXoL"),c=n("FKr1");n("8LU1"),n("cH1L");let a=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},imports:[[c.e,c.c],c.e,c.c]}),t})();var b=n("qFsG"),u=n("bTqV"),d=n("bOdf"),p=n("tyNb"),m=n("QQ3A"),l=n("hCCi");class f{constructor(){this.title="",this.body=""}}let g=(()=>{class t{constructor(){this.post=new f}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Ib({type:t,selectors:[["app-post"]],inputs:{post:"post"},decls:7,vars:2,consts:[[1,"title"],[1,"body"]],template:function(t,e){1&t&&(i.Tb(0,"mat-card"),i.Tb(1,"mat-card-header"),i.Tb(2,"mat-card-title",0),i.vc(3),i.Sb(),i.Sb(),i.Tb(4,"mat-card-content"),i.Tb(5,"p",1),i.vc(6),i.Sb(),i.Sb(),i.Sb()),2&t&&(i.Eb(3),i.wc(e.post.title),i.Eb(3),i.wc(e.post.body))},directives:[s.a,s.c,s.e,s.b],styles:["mat-card-content[_ngcontent-%COMP%]{text-align:left}"]}),t})();const h=["forumId",""];function P(t,e){if(1&t&&i.Pb(0,"app-post",4),2&t){const t=e.$implicit;i.Gb("last",e.last),i.ic("post",t)}}function v(t,e){if(1&t&&(i.Rb(0),i.tc(1,P,1,3,"app-post",3),i.Qb()),2&t){const t=i.fc();i.Eb(1),i.ic("ngForOf",t.posts)}}function w(t,e){1&t&&(i.Tb(0,"div",5),i.Tb(1,"p"),i.vc(2,"There are no posts in this forum yet."),i.Sb(),i.Tb(3,"p"),i.vc(4,"You should add one!"),i.Sb(),i.Sb())}let y=(()=>{class t{constructor(t){this.postService=t,this.newPost=!1}ngOnInit(){}ngOnChanges(t){this._checkAttributes(),clearTimeout(this.nextUpdate),this._getPosts()}addPost(t){this.posts.push(t),this.newPost=!0}_checkAttributes(){if(null==this.forumId)throw new Error("Attribute 'forumId' cannot be undefined or null.")}ngOnDestroy(){clearTimeout(this.nextUpdate)}ngAfterViewChecked(){if(this.newPost){const t=document.querySelector("app-post.last");scrollBy(0,t.scrollHeight+t.children.item(0).clientHeight),this.newPost=!1}}_getPosts(){this.postService.getPosts(this.forumId).subscribe({next:t=>{this.posts=t},complete:()=>{this.nextUpdate=setTimeout(()=>this._getPosts(),5e3)}})}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(l.a))},t.\u0275cmp=i.Ib({type:t,selectors:[["app-post-feed","forumId",""]],inputs:{forumId:"forumId"},features:[i.Cb],attrs:h,decls:4,vars:2,consts:[[1,"container"],[4,"ngIf","ngIfElse"],["noPostsNotification",""],[3,"last","post",4,"ngFor","ngForOf"],[3,"post"],[1,"noPostNotification"]],template:function(t,e){if(1&t&&(i.Tb(0,"div",0),i.tc(1,v,2,1,"ng-container",1),i.tc(2,w,5,0,"ng-template",null,2,i.uc),i.Sb()),2&t){const t=i.mc(3);i.Eb(1),i.ic("ngIf",!e.posts||e.posts.length>0)("ngIfElse",t)}},directives:[o.i,o.h,g],styles:["app-post[_ngcontent-%COMP%]{padding:1em}.container[_ngcontent-%COMP%]{text-align:center}.noPostNotification[_ngcontent-%COMP%]{display:inline-block;margin:2em;padding:2em;text-align:center;background:#222;border-radius:5px}.noPostNotification[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}"]}),t})();var I=n("kmnG");const S=["forumId",""];let O=(()=>{class t{constructor(t,e){this.fb=t,this.postService=e,this.newPostEvent=new i.n,this.newPostForm=this.fb.group({title:["",[r.j.required,r.j.maxLength(128)]],body:["",[r.j.required]]})}get title(){return this.newPostForm.get("title")}get titleErrors(){return this.title.errors?Object.keys(this.title.errors):[]}get body(){return this.newPostForm.get("body")}get bodyErrors(){return this.body.errors?Object.keys(this.body.errors):[]}ngOnInit(){}onSubmit(t){const e=Object.assign({forumId:this.forumId},t);this.postService.addPost(e).subscribe(t=>this.newPostEvent.emit(t))}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(r.b),i.Ob(l.a))},t.\u0275cmp=i.Ib({type:t,selectors:[["app-add-post","forumId",""]],inputs:{forumId:"forumId"},outputs:{newPostEvent:"newPostEvent"},attrs:S,decls:16,vars:4,consts:[[3,"formGroup","ngSubmit"],["ngForm","ngForm"],["formControlName","title","id","title","matInput","","type","text"],["formControlName","body","id","body","matInput","","type","text"],["color","primary","mat-raised-button","","type","submit",1,"button",3,"disabled"]],template:function(t,e){if(1&t){const t=i.Ub();i.Tb(0,"form",0,1),i.bc("ngSubmit",(function(){i.nc(t);const n=i.mc(1);return e.onSubmit(e.newPostForm.value),n.resetForm()})),i.Tb(2,"mat-form-field"),i.Tb(3,"mat-label"),i.vc(4,"Title"),i.Sb(),i.Pb(5,"input",2),i.Tb(6,"mat-error"),i.vc(7),i.Sb(),i.Sb(),i.Tb(8,"mat-form-field"),i.Tb(9,"mat-label"),i.vc(10,"Body"),i.Sb(),i.Pb(11,"textarea",3),i.Tb(12,"mat-error"),i.vc(13),i.Sb(),i.Sb(),i.Tb(14,"button",4),i.vc(15,"Post"),i.Sb(),i.Sb()}2&t&&(i.ic("formGroup",e.newPostForm),i.Eb(7),i.wc(e.titleErrors),i.Eb(6),i.wc(e.bodyErrors),i.Eb(1),i.ic("disabled",e.newPostForm.invalid))},directives:[r.k,r.g,r.d,I.b,I.e,r.a,b.a,r.f,r.c,I.a,u.a],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}textarea[_ngcontent-%COMP%]{min-height:100px;max-height:300px;height:100%}"]}),t})();function T(t,e){if(1&t){const t=i.Ub();i.Tb(0,"div",4),i.Tb(1,"h2",5),i.vc(2),i.Sb(),i.Tb(3,"p",6),i.vc(4),i.Sb(),i.Pb(5,"app-post-feed",7,8),i.Tb(7,"app-add-post",9),i.bc("newPostEvent",(function(e){return i.nc(t),i.mc(6).addPost(e)})),i.Sb(),i.Sb()}if(2&t){const t=i.fc();i.Eb(2),i.wc(t.forum.name),i.Eb(2),i.wc(t.forum.description),i.Eb(1),i.ic("forumId",t.forum.id),i.Eb(2),i.ic("forumId",t.forum.id)}}function E(t,e){1&t&&(i.Tb(0,"div",10),i.vc(1," We are loading your content "),i.Sb())}const x=function(){return["/forums"]},C=[{path:"",component:(()=>{class t{constructor(t,e,n){this.route=t,this.forumService=e,this.router=n}ngOnInit(){this.route.paramMap.pipe(Object(d.a)(t=>this.forumService.getForum(+t.get("id")))).subscribe(t=>this.forum=t,()=>this.router.navigateByUrl("/page-not-found",{replaceUrl:!0}))}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(p.a),i.Ob(m.a),i.Ob(p.b))},t.\u0275cmp=i.Ib({type:t,selectors:[["app-forum"]],decls:6,vars:4,consts:[[1,"control-bar"],["color","primary","mat-raised-button","",1,"forum-explorer-button",3,"routerLink"],["class","container",4,"ngIf","ngIfElse"],["loading",""],[1,"container"],[1,"forum-name"],[1,"forum-desc"],[3,"forumId"],["feedComponent",""],[3,"forumId","newPostEvent"],[1,"container","loading-widget"]],template:function(t,e){if(1&t&&(i.Tb(0,"div",0),i.Tb(1,"button",1),i.vc(2,"Forum Explorer "),i.Sb(),i.Sb(),i.tc(3,T,8,4,"div",2),i.tc(4,E,2,0,"ng-template",null,3,i.uc)),2&t){const t=i.mc(5);i.Eb(1),i.ic("routerLink",i.jc(3,x)),i.Eb(2),i.ic("ngIf",e.forum)("ngIfElse",t)}},directives:[u.a,p.c,o.i,y,O],styles:["*[_ngcontent-%COMP%]{max-width:1024px;display:block;margin:auto}.control-bar[_ngcontent-%COMP%]{padding:0 2em;height:2em}.control-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 0 0 1em;float:right}.container[_ngcontent-%COMP%]{padding:2em;text-align:center}app-post-feed[_ngcontent-%COMP%]{text-align:left}app-add-post[_ngcontent-%COMP%]{max-width:700px;width:100%;display:inline-block}"]}),t})()}];let M=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},imports:[[p.d.forChild(C)],p.d]}),t})();n.d(e,"ForumModule",(function(){return _}));let _=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},imports:[[o.b,r.i,s.d,a,b.b,u.b,M]]}),t})()}}]);