function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{5920:function(t,e,n){"use strict";n.r(e);var o=n("ofXK"),r=n("3Pt+"),i=n("Wp6s"),s=n("fXoL"),c=n("FKr1");n("8LU1"),n("cH1L");var a,u,f=((a=function t(){_classCallCheck(this,t)}).\u0275mod=s.Mb({type:a}),a.\u0275inj=s.Lb({factory:function(t){return new(t||a)},imports:[[c.e,c.c],c.e,c.c]}),a),b=n("qFsG"),l=n("bTqV"),d=n("bOdf"),p=n("tyNb"),m=n("QQ3A"),h=n("hCCi"),g=function t(){_classCallCheck(this,t),this.title="",this.body=""},v=((u=function(){function t(){_classCallCheck(this,t),this.post=new g}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||u)},u.\u0275cmp=s.Ib({type:u,selectors:[["app-post"]],inputs:{post:"post"},decls:7,vars:2,consts:[[1,"title"],[1,"body"]],template:function(t,e){1&t&&(s.Tb(0,"mat-card"),s.Tb(1,"mat-card-header"),s.Tb(2,"mat-card-title",0),s.vc(3),s.Sb(),s.Sb(),s.Tb(4,"mat-card-content"),s.Tb(5,"p",1),s.vc(6),s.Sb(),s.Sb(),s.Sb()),2&t&&(s.Eb(3),s.wc(e.post.title),s.Eb(3),s.wc(e.post.body))},directives:[i.a,i.c,i.e,i.b],styles:["mat-card-content[_ngcontent-%COMP%]{text-align:left}"]}),u),y=["forumId",""];function P(t,e){if(1&t&&s.Pb(0,"app-post",4),2&t){var n=e.$implicit;s.Gb("last",e.last),s.ic("post",n)}}function w(t,e){if(1&t&&(s.Rb(0),s.tc(1,P,1,3,"app-post",3),s.Qb()),2&t){var n=s.fc();s.Eb(1),s.ic("ngForOf",n.posts)}}function C(t,e){1&t&&(s.Tb(0,"div",5),s.Tb(1,"p"),s.vc(2,"There are no posts in this forum yet."),s.Sb(),s.Tb(3,"p"),s.vc(4,"You should add one!"),s.Sb(),s.Sb())}var k,_,I=((k=function(){function t(e){_classCallCheck(this,t),this.postService=e,this.newPost=!1}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(t){this._checkAttributes(),clearTimeout(this.nextUpdate),this._getPosts()}},{key:"addPost",value:function(t){this.posts.push(t),this.newPost=!0}},{key:"_checkAttributes",value:function(){if(null==this.forumId)throw new Error("Attribute 'forumId' cannot be undefined or null.")}},{key:"ngOnDestroy",value:function(){clearTimeout(this.nextUpdate)}},{key:"ngAfterViewChecked",value:function(){if(this.newPost){var t=document.querySelector("app-post.last");scrollBy(0,t.scrollHeight+t.children.item(0).clientHeight),this.newPost=!1}}},{key:"_getPosts",value:function(){var t=this;this.postService.getPosts(this.forumId).subscribe({next:function(e){t.posts=e},complete:function(){t.nextUpdate=setTimeout((function(){return t._getPosts()}),5e3)}})}}]),t}()).\u0275fac=function(t){return new(t||k)(s.Ob(h.a))},k.\u0275cmp=s.Ib({type:k,selectors:[["app-post-feed","forumId",""]],inputs:{forumId:"forumId"},features:[s.Cb],attrs:y,decls:4,vars:2,consts:[[1,"container"],[4,"ngIf","ngIfElse"],["noPostsNotification",""],[3,"last","post",4,"ngFor","ngForOf"],[3,"post"],[1,"noPostNotification"]],template:function(t,e){if(1&t&&(s.Tb(0,"div",0),s.tc(1,w,2,1,"ng-container",1),s.tc(2,C,5,0,"ng-template",null,2,s.uc),s.Sb()),2&t){var n=s.mc(3);s.Eb(1),s.ic("ngIf",!e.posts||e.posts.length>0)("ngIfElse",n)}},directives:[o.i,o.h,v],styles:["app-post[_ngcontent-%COMP%]{padding:1em}.container[_ngcontent-%COMP%]{text-align:center}.noPostNotification[_ngcontent-%COMP%]{display:inline-block;margin:2em;padding:2em;text-align:center;background:#222;border-radius:5px}.noPostNotification[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}"]}),k),O=n("kmnG"),S=["forumId",""],T=((_=function(){function t(e,n){_classCallCheck(this,t),this.fb=e,this.postService=n,this.newPostEvent=new s.n,this.newPostForm=this.fb.group({title:["",[r.j.required,r.j.maxLength(128)]],body:["",[r.j.required]]})}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"onSubmit",value:function(t){var e=this,n=Object.assign({forumId:this.forumId},t);this.postService.addPost(n).subscribe((function(t){return e.newPostEvent.emit(t)}))}},{key:"title",get:function(){return this.newPostForm.get("title")}},{key:"titleErrors",get:function(){return this.title.errors?Object.keys(this.title.errors):[]}},{key:"body",get:function(){return this.newPostForm.get("body")}},{key:"bodyErrors",get:function(){return this.body.errors?Object.keys(this.body.errors):[]}}]),t}()).\u0275fac=function(t){return new(t||_)(s.Ob(r.b),s.Ob(h.a))},_.\u0275cmp=s.Ib({type:_,selectors:[["app-add-post","forumId",""]],inputs:{forumId:"forumId"},outputs:{newPostEvent:"newPostEvent"},attrs:S,decls:16,vars:4,consts:[[3,"formGroup","ngSubmit"],["ngForm","ngForm"],["formControlName","title","id","title","matInput","","type","text"],["formControlName","body","id","body","matInput","","type","text"],["color","primary","mat-raised-button","","type","submit",1,"button",3,"disabled"]],template:function(t,e){if(1&t){var n=s.Ub();s.Tb(0,"form",0,1),s.bc("ngSubmit",(function(){s.nc(n);var t=s.mc(1);return e.onSubmit(e.newPostForm.value),t.resetForm()})),s.Tb(2,"mat-form-field"),s.Tb(3,"mat-label"),s.vc(4,"Title"),s.Sb(),s.Pb(5,"input",2),s.Tb(6,"mat-error"),s.vc(7),s.Sb(),s.Sb(),s.Tb(8,"mat-form-field"),s.Tb(9,"mat-label"),s.vc(10,"Body"),s.Sb(),s.Pb(11,"textarea",3),s.Tb(12,"mat-error"),s.vc(13),s.Sb(),s.Sb(),s.Tb(14,"button",4),s.vc(15,"Post"),s.Sb(),s.Sb()}2&t&&(s.ic("formGroup",e.newPostForm),s.Eb(7),s.wc(e.titleErrors),s.Eb(6),s.wc(e.bodyErrors),s.Eb(1),s.ic("disabled",e.newPostForm.invalid))},directives:[r.k,r.g,r.d,O.b,O.e,r.a,b.a,r.f,r.c,O.a,l.a],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}textarea[_ngcontent-%COMP%]{min-height:100px;max-height:300px;height:100%}"]}),_);function E(t,e){if(1&t){var n=s.Ub();s.Tb(0,"div",4),s.Tb(1,"h2",5),s.vc(2),s.Sb(),s.Tb(3,"p",6),s.vc(4),s.Sb(),s.Pb(5,"app-post-feed",7,8),s.Tb(7,"app-add-post",9),s.bc("newPostEvent",(function(t){return s.nc(n),s.mc(6).addPost(t)})),s.Sb(),s.Sb()}if(2&t){var o=s.fc();s.Eb(2),s.wc(o.forum.name),s.Eb(2),s.wc(o.forum.description),s.Eb(1),s.ic("forumId",o.forum.id),s.Eb(2),s.ic("forumId",o.forum.id)}}function x(t,e){1&t&&(s.Tb(0,"div",10),s.vc(1," We are loading your content "),s.Sb())}var M,F,j=function(){return["/forums"]},L=[{path:"",component:(M=function(){function t(e,n,o){_classCallCheck(this,t),this.route=e,this.forumService=n,this.router=o}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.paramMap.pipe(Object(d.a)((function(e){return t.forumService.getForum(+e.get("id"))}))).subscribe((function(e){return t.forum=e}),(function(){return t.router.navigateByUrl("/page-not-found",{replaceUrl:!0})}))}}]),t}(),M.\u0275fac=function(t){return new(t||M)(s.Ob(p.a),s.Ob(m.a),s.Ob(p.b))},M.\u0275cmp=s.Ib({type:M,selectors:[["app-forum"]],decls:6,vars:4,consts:[[1,"control-bar"],["color","primary","mat-raised-button","",1,"forum-explorer-button",3,"routerLink"],["class","container",4,"ngIf","ngIfElse"],["loading",""],[1,"container"],[1,"forum-name"],[1,"forum-desc"],[3,"forumId"],["feedComponent",""],[3,"forumId","newPostEvent"],[1,"container","loading-widget"]],template:function(t,e){if(1&t&&(s.Tb(0,"div",0),s.Tb(1,"button",1),s.vc(2,"Forum Explorer "),s.Sb(),s.Sb(),s.tc(3,E,8,4,"div",2),s.tc(4,x,2,0,"ng-template",null,3,s.uc)),2&t){var n=s.mc(5);s.Eb(1),s.ic("routerLink",s.jc(3,j)),s.Eb(2),s.ic("ngIf",e.forum)("ngIfElse",n)}},directives:[l.a,p.c,o.i,I,T],styles:["*[_ngcontent-%COMP%]{max-width:1024px;display:block;margin:auto}.control-bar[_ngcontent-%COMP%]{padding:0 2em;height:2em}.control-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 0 0 1em;float:right}.container[_ngcontent-%COMP%]{padding:2em;text-align:center}app-post-feed[_ngcontent-%COMP%]{text-align:left}app-add-post[_ngcontent-%COMP%]{max-width:700px;width:100%;display:inline-block}"]}),M)}],U=((F=function t(){_classCallCheck(this,t)}).\u0275mod=s.Mb({type:F}),F.\u0275inj=s.Lb({factory:function(t){return new(t||F)},imports:[[p.d.forChild(L)],p.d]}),F);n.d(e,"ForumModule",(function(){return q}));var N,q=((N=function t(){_classCallCheck(this,t)}).\u0275mod=s.Mb({type:N}),N.\u0275inj=s.Lb({factory:function(t){return new(t||N)},imports:[[o.b,r.i,i.d,f,b.b,l.b,U]]}),N)}}]);